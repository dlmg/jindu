{include file="public/header"}

{include file="public/nav"}
<!-- MAIN CONTENT -->
<div class="main">
<div class="main-content">
    <div class="container-fluid">

        <div class="row">
            <div class="col-md-12">
                <div class="panel-footer">
                    <div class="row">
                        <div class="col-md-6"><span class="panel-note"> 修改登录密码</span></div>

                    </div>
                </div>
                <!-- RECENT PURCHASES -->
                <div class="panel">
                    <div class="panel-heading">
                        <h3 class="panel-title">请认证填写下方信息！</h3>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal" action="{:url('index/index/editPassword')}" method="post" id="form_role">

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" style="margin-top:13px;"> 原始密码 </label>
                                        <div class="col-sm-6">
                                            <input name="old_password" value="" placeholder="请填写原始密码" class="form-control input-lg" type="password">
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" style="margin-top:13px;"> 新密码 </label>
                                        <div class="col-sm-6">
                                            <input name="new_password" value="" placeholder="请填写新密码" class="form-control input-lg" type="password">
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" style="margin-top:13px;"> 确认密码 </label>
                                        <div class="col-sm-6">
                                            <input name="con_password" value="" placeholder="请填写确认密码" class="form-control input-lg" type="password">
                                        </div>
                                    </div>


                                    <div class="clearfix form-actions">
                                        <div class="col-md-offset-3 col-md-9">
                                            <button type="submit" class="layui-btn" id="submit" lay-submit lay-filter="submit">立即提交</button>
                                        </div>
                                    </div>
                                    <div class="hr hr-24"></div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END RECENT PURCHASES -->
            </div>

        </div>
    </div>
</div>
</div>
<!-- END MAIN CONTENT -->
<script>
    layui.use(['jquery', 'form'], function () {
        var $ = layui.jquery,
            form = layui.form;

        // 提交表单
        form.on('submit(submit)',function(data){
            // 加载层
            var loading = layer.msg('处理中，请稍后...', {
                icon: 16,
                offset: '300px',
                shade: 0.2
            });
            $.ajax({
                type: "post",
                url: "{:url('index/index/editPassword')}",
                data: $('#form_role').serialize(),
                dataType: 'json',
                beforeSend: function(){},
                success: function (data) {
                    layer.close(loading);
                    switch (data.status)
                    {
                        case 200:
                            layer.msg(data.message, {
                                offset: '300px',
                                icon: 1,
                                time: 1500
                            },function(){
                                location.href = data.url;
                            });
                            break;
                        case 201:
                            layer.msg(data.message, {
                                offset: '300px',
                                icon: 0,
                                time: 1500
                            }, function() {
                                location.href = data.url;
                            });
                    }
                }
            });
            return false;
        });
    });
</script>
{include file="public/footer"}